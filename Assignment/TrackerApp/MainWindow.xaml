<Window x:Class="TrackerApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:TrackerApp.ViewModels"
        Title="Personal Finance &amp; Habit Tracker" Height="640" Width="900">
    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>

        <!-- Expense Panel -->
        <GroupBox Header="Expense" Grid.Column="0" Margin="5">
            <StackPanel Margin="6">
                <TextBlock Text="Amount" />
                <TextBox Text="{Binding NewExpenseAmount, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Description" Margin="0,6,0,0"/>
                <TextBox Text="{Binding NewExpenseDescription, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Category" Margin="0,6,0,0"/>
                <ComboBox SelectedValue="{Binding NewExpenseCategory}" SelectedValuePath="Content">
                    <ComboBoxItem Content="Other" />
                    <ComboBoxItem Content="Food" />
                    <ComboBoxItem Content="Transport" />
                    <ComboBoxItem Content="Bills" />
                    <ComboBoxItem Content="Entertainment" />
                </ComboBox>

                <Button Content="Add Expense" Margin="0,10,0,0" Command="{Binding AddExpenseCommand}" />
                <ListBox ItemsSource="{Binding Expenses}" DisplayMemberPath="Description" Height="200" Margin="0,8,0,0"/>
            </StackPanel>
        </GroupBox>

        <!-- Habit Panel -->
        <GroupBox Header="Habits" Grid.Column="1" Margin="5">
            <StackPanel Margin="6">
                <TextBlock Text="Habit Name"/>
                <TextBox Text="{Binding NewHabitName, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Frequency" Margin="0,6,0,0"/>
                <ComboBox SelectedValue="{Binding NewHabitFrequency}">
                    <ComboBoxItem Content="Daily" />
                    <ComboBoxItem Content="Weekly" />
                </ComboBox>

                <Button Content="Add Habit" Margin="0,10,0,0" Command="{Binding AddHabitCommand}" />
                <ListView ItemsSource="{Binding Habits}" Height="250" Margin="0,8,0,0">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="120"/>
                            <GridViewColumn Header="Streak" Width="60">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Streak}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Action" Width="80">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="Log" Command="{Binding DataContext.LogHabitCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
            </StackPanel>
        </GroupBox>

        <!-- Goals Panel -->
        <GroupBox Header="Goals" Grid.Column="2" Margin="5">
            <StackPanel Margin="6">
                <TextBlock Text="Title"/>
                <TextBox Text="{Binding NewGoalTitle, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Target Amount" Margin="0,6,0,0"/>
                <TextBox Text="{Binding NewGoalTarget, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Deadline" Margin="0,6,0,0"/>
                <DatePicker SelectedDate="{Binding NewGoalDeadline}" />

                <Button Content="Add Goal" Margin="0,10,0,0" Command="{Binding AddGoalCommand}" />

                <ListView ItemsSource="{Binding Goals}" Height="250" Margin="0,8,0,0">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Title" DisplayMemberBinding="{Binding Title}" Width="120"/>
                            <GridViewColumn Header="%Complete" Width="80">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding PercentageComplete, StringFormat={}{0:F1}%}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Deadline" DisplayMemberBinding="{Binding Deadline, StringFormat=d}" Width="100"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </StackPanel>
        </GroupBox>
    </Grid>
</Window>
